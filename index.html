<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="assets/images/favicon.svg" type="image/x-icon" />
    <title>HBN</title>
    <!-- ========== All CSS files linkup ========= -->
    <link rel="stylesheet" href="bootstrap.min.css" />
    <link rel="stylesheet" href="lineicons.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="materialdesignicons.min.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="fullcalendar.css" />
    <link rel="stylesheet" href="main.css" />
    <style>
      table { border-collapse: collapse; width: 100%; margin-top: 20px; }
      th, td { border: 1px solid #999; padding: 8px; text-align: center; }
      th { background-color: #f2f2f2; }
     
 
    </style>
<style>
  .eid-card {
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
    width: 220px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }

  .home {
    background-color: #d4edda;
    color: #155724;
  }

  .work {
    background-color: #f8d7da;
    color: #721c24;
  }

  #eid_cards {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-top: 2rem;
  }
  .sticky-header th {
    position: sticky;
    top: 0;
    z-index: 10;
    background-color: #343a40; /* Bootstrap .table-dark */
    color: white;
  }
</style>

    
  </head>
  <body>
    <!-- ======== main-wrapper start =========== -->
    <main class="container">
      <!-- ========== section start ========== -->
      <section class="">
        <div class="container-fluid">
          <!-- ========== title-wrapper start ========== -->
          <div class="title-wrapper pt-30">
            <div class="row align-items-center">
              <div class="col-md-6">
                <div class="title">
                  <h2>Dashboard</h2>
                </div>
              </div>
              <!-- end col -->
              <div class="col-md-6">
                <div class="breadcrumb-wrapper">
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item">
                        <a href="#">My App</a>
                      </li>
                      <li class="breadcrumb-item active" aria-current="page">
                        Dashboard
                      </li>
                    </ol>
                  </nav>
                </div>
              </div>
              <!-- end col -->
            </div>
            <!-- end row -->
          </div>
          <!-- ========== title-wrapper end ========== -->
          <div class="row">
            <div class="col-xl-3 col-lg-4 col-sm-6">
              <div class="icon-card mb-30">
                <div class="icon purple">
                  <i class="lni lni-cake"></i>
                </div>
                <div class="content">
                  <h6 class="mb-10">Aid El-Fitr</h6>
                       <h3 class="text-bold mb-10">date : <span id="date_of_aid_fitr_this_year"> </span></h3>
                       <p class="text-sm text-success">
                       <span class="text-gray"><span id="number_of_days_to_aid_fitr"></span>  </span>
                  </p>
                </div>
              </div>
              <!-- End Icon Cart -->
            </div>
            <!-- End Col -->
            <div class="col-xl-3 col-lg-4 col-sm-6">
              <div class="icon-card mb-30">
                <div class="icon success">
                  <i class="lni lni-burger"></i>
                </div>
                <div class="content">
                  <h6 class="mb-10">Aid El-Adha</h6>
                       <h3 class="text-bold mb-10">date : <span id="date_of_aid_Adha_this_year"> </span></h3>
                       <p class="text-sm text-success">
                       <span class="text-gray"><span id="number_of_days_to_aid_adha"></span> </span>
                  </p>
                </div>
              </div>
              <!-- End Icon Cart -->
            </div>
          </div>
          <!-- End Row -->
          <div class="row">
            <div class="col-lg-6">
              <h3>Static Eid Table</h3>
              <table id="eidTable">
                <thead>
                  <tr>
                    <th>السنة الميلادية</th>
                    <th>عيد الفطر</th>
                    <th>عيد الأضحى</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
            <div class="col-lg-6">
              <div class="input-style-1">
                <h3>Start date</h3>
                <input type="date" id="entery_date" placeholder="Enter start date">
              </div>
              <div class="card-style mb-30">
                <div class="table-wrapper table-responsive">
                  <div class="table-responsive" style="max-height: 330px; overflow-y: auto; border: 1px solid #ddd;">
                    <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
                      <table id="dynamic_table" class="table table-bordered table-striped">
                        <thead class="table-dark sticky-header">
                          <tr>
                            <th>Start</th>
                            <th>End</th>
                            <th>Status</th>
                          </tr>
                        </thead>
                        <tbody></tbody> <!-- Table content will be added dynamically -->
                      </table>
                    </div>
                    
                </div>
            </div>
            </div>
            <!-- End Col -->
          </div>
              <!-- Display Eid Calculation Messages -->
          <div id="eid_cards" style="display: flex; flex-wrap: wrap; gap: 1rem;"></div>
          <!-- End Row -->
        </div>
        <!-- end container -->
      </section>
      <footer class="footer">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-6 order-last order-md-first">
               <!-- Copyright -->
              <div class="copyright text-center text-md-start">
                &copy; Copyright © <span id="copyright-year"></span> . All rights reserved.
              </div>
              <script>
                document.getElementById("copyright-year").textContent = new Date().getFullYear();
              </script>
              <!-- Copyright -->
            </div>
            <!-- end col-->
            <div class="col-md-6">
              <div class="terms d-flex justify-content-center justify-content-md-end">
                <a href="#" class="text-sm">Term & Conditions</a>
                <a href="#" class="text-sm ml-15">Privacy & Policy</a>
              </div>
            </div>
          </div>
          <!-- end row -->
        </div>
        <!-- end container -->
      </footer>
      <!-- ========== footer end =========== -->
    </main>
    <!-- ========= All Javascript files linkup ======== -->


 <script>
  const eidDates = {
    2025: { fitr: "31/03/2025", adha: "07/06/2025" },
    2026: { fitr: "20/03/2026", adha: "27/05/2026" },
    2027: { fitr: "10/03/2027", adha: "17/05/2027" },
    2028: { fitr: "27/02/2028", adha: "05/05/2028" },
    2029: { fitr: "15/02/2029", adha: "24/04/2029" },
    2030: { fitr: "04/02/2030", adha: "14/04/2030" }
  };

  function parseDate(str) {
    const [day, month, year] = str.split('/').map(Number);
    return new Date(year, month - 1, day);
  }
  function formatDate(d) {
      return d.toISOString().split('T')[0];
    }

  function calculateDaysBetween(from, to) {
      const diff = new Date(to) - new Date(from);
      return Math.ceil(diff / (1000 * 60 * 60 * 24));
    }

  document.addEventListener("DOMContentLoaded", function () {
    const tbody = document.querySelector('#eidTable tbody');
    for (let year = 2025; year <= 2030; year++) {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${year}</td>
        <td>${eidDates[year]?.fitr || "غير متوفر"}</td>
        <td>${eidDates[year]?.adha || "غير متوفر"}</td>
      `;
      tbody.appendChild(row);
    }

    const currentYear = new Date().getFullYear();
    const fitrDateStr = eidDates[currentYear]?.fitr;
    const adhaDateStr = eidDates[currentYear]?.adha;

    const today = new Date();
    const fitrDate = parseDate(fitrDateStr);
    const adhaDate = parseDate(adhaDateStr);

    const daysToAidFitr = Math.ceil((fitrDate - today) / (1000 * 60 * 60 * 24));
    const daysToAidAdha = Math.ceil((adhaDate - today) / (1000 * 60 * 60 * 24));

   if (fitrDate) {
        document.getElementById("date_of_aid_fitr_this_year").textContent = fitrDateStr;
        const today = new Date();
        const daysToAidFitr = calculateDaysBetween(today, new Date(fitrDate));
        document.getElementById("number_of_days_to_aid_fitr").textContent = daysToAidFitr >= 0 ? "("+ daysToAidFitr + " days )" : "Already Passed";
      }

  if (adhaDate) {
    document.getElementById("date_of_aid_Adha_this_year").textContent = adhaDateStr;
    const today = new Date();
    const daysToAidAdha = calculateDaysBetween(today, new Date(adhaDate));
    document.getElementById("number_of_days_to_aid_adha").textContent = daysToAidAdha >= 0 ? "("+ daysToAidAdha + " days )" : "Already Passed";
  }

  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("entery_date").addEventListener("change", generateTable);
  
    function generateTable() {
      const input = document.getElementById("entery_date").value;
      const inputDate = new Date(input);
      if (isNaN(inputDate)) return;
  
      const tableBody = document.querySelector("#dynamic_table tbody");
      const eidCards = document.getElementById("eid_cards");
      tableBody.innerHTML = "";
      eidCards.innerHTML = "";
  
      const states = ["At Work", "At Home"];
      let statusIndex = 0;
      let current = new Date(inputDate);
      const endDateLimit = new Date("2030-12-31");
  
      while (current <= endDateLimit) {
        let startDate = new Date(current);
        let endDate = new Date(startDate);
        endDate.setDate(endDate.getDate() + 28);
  
        const currentYear = startDate.getFullYear();
        const fitrStr = eidDates[currentYear]?.fitr;
        const adhaStr = eidDates[currentYear]?.adha;
  
        const fitrDate = fitrStr ? parseDate(fitrStr) : null;
        const adhaDate = adhaStr ? parseDate(adhaStr) : null;
  
        const startStr = startDate.toISOString().split("T")[0];
        const endStr = endDate.toISOString().split("T")[0];
        const currentStatus = states[statusIndex];
  
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${startStr}</td>
          <td>${endStr}</td>
          <td>${currentStatus}</td>
        `;
  
        // Helper to create card
        function createEidCard(type, eidDateStr, eidDate) {
          const className = currentStatus === "At Home" ? "home" : "work";
          const daysBeforeEid = calculateDaysBetween(startDate, eidDate);
          const label = currentStatus === "At Home"
            ? `You will be <b>at home</b> for <b>${daysBeforeEid} days</b> before Eid.`
            : `You will be <b>at work</b> for <b>${daysBeforeEid} days</b> before Eid.`;
  
          const card = `
            <div class="eid-card ${className}">
              <h4>${type}</h4>
              <p><strong>Date:</strong> ${eidDateStr}</p>
              <p><strong>Status:</strong> ${currentStatus}</p>
              <p>${label}</p>
            </div>
          `;
          eidCards.innerHTML += card;
        }
  
        if (fitrDate && fitrDate >= startDate && fitrDate <= endDate) {
          row.style.backgroundColor = currentStatus === "At Work" ? "red" : "green";
          row.style.color = "white";
          createEidCard("Eid al-Fitr", fitrStr, fitrDate);
        }
  
        if (adhaDate && adhaDate >= startDate && adhaDate <= endDate) {
          row.style.backgroundColor = currentStatus === "At Work" ? "red" : "green";
          row.style.color = "white";
          createEidCard("Eid al-Adha", adhaStr, adhaDate);
        }
  
        tableBody.appendChild(row);
        statusIndex = (statusIndex + 1) % 2;
        current = new Date(endDate);
      }
    }
  });
  </script>
  


<!-- Display Eid Calculation Messages -->
<div id="eid_message" style="margin-top: 20px; font-weight: bold;"></div>

<script src="bootstrap.bundle.min.js"></script>
<script src="Chart.min.js"></script>
<script src="dynamic-pie-chart.js"></script>
<script src="moment.min.js"></script>
<script src="fullcalendar.js"></script>
<script src="jvectormap.min.js"></script>
<script src="world-merc.js"></script>
<script src="polyfill.js"></script>
<script src="main.js"></script>

  </body>
</html>
